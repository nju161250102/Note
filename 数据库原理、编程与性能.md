# 《数据库原理、编程与性能》

## 2 关系模型

### 2.2 数据库各部分的命名
表，列，行 <==> 关系，属性，元组  
数据库是表或者说是关系的集合，表的标题是列名的集合，表的内容是元组的集合。  
域：表T的属性A的取值范围。  
表是各属性域的笛卡尔乘积的子集。  

### 2.3 关系规则
1. 第一范式规则：不允许含有多值属性（重复字段）和含有内部结构的列。  
2. 只能基于内容存取行规则  
3. 行唯一性规则：关系中任何两个元组的值在同一时刻不能是相同的。  
4. 实体完整性规则：表T中任意行在主键列的取值都不允许为空值。  

### 2.4 键、超键和空值
超键：在关系中能唯一标识元组的属性集称为关系模式的超键。  
键：没有真子集也是超键，也被称为候选键。
主键：数据库设计者选择的对储存数据对象予以唯一和完整标识的数据列或属性的组合。  
空值：特殊含义。  

### 2.6 集合运算
兼容表：表R和表S具有相同的标题，属性是从相同的域中选出并具有相同的含义。  
* 交、并、差：（兼容表才能进行）∩，∪，-  
* 赋值、别名：  :=
* 乘积：同名列名使用限定符名，类似笛卡尔乘积。  

### 2.7 自然关系运算
* 投影：R[A, B ...]
* 选择：R Where C，可以使用AND、OR、NOT连接符，不等号为<>
* 连接：∞，仅存在具有共同属性的元组时有效
* 除法：T=R÷S则S的每一行s，t和s的串接结果恰好能够在R中找到。  
运算优先级：投影-选择-乘积-连接/除法-交-并/差

### 2.10 其他关系运算
外连接、左外连接、右外连接、θ连接  

## 3 基本SQL查询语言

### 3.3 简单的Select语句
SELECT 列名 FROM 表名 WHERE 条件  
DISTINCT 去除重复的行  
步骤：   
1. 计算FROM后面表的笛卡尔乘积，可以使用AS定义别名。  
2. 实施WHERE子句的选择操作  
3. 将选择列表中的属性投影成结果表，列名仅出现在一个表则不需要约束。 
选择列表中可以计算表达式的值，并可以用AS重新命名。  

### 3.4 子查询
IN谓词，值在集合中，相反为NOT IN。  
相关子查询和不相关子查询，相关子查询根据外层传入值获得结果集。  
量化结果谓词：expr θ[SOME|ANY|ALL]，SOME和ANY相同。
	ALL：真当且仅当每一个子查询元素s，expr θ s为真  
	SOME：为真当且仅当至少存在一个子查询元素s，expr θ s为真    
EXISTS谓词：测试子查询的结果集是否为非空，非空集合为真。  

### 3.5 UNION运算符和FOR ALL条件
UNION 提供关系代数的并集运算，不能用于谓词之中。

## 4 对象-关系SQL
### 4.2 对象和表
创建对象类型：create type ... as object ();  
创建对象表：create table [tablename] of [object] (primary key)  
全行对象：select value(p)  
